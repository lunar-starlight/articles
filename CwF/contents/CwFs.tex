\section{Categories with Families}

\begin{definition}
  A \emph{category with families} is comprised of the following data
  \begin{itemize}
  \item Category of contexts \(\ctx\) with a terminal object \(ε\).
  \item Presheaf of types \(\ty\) over \(\ctx\).
  \item Dependent presheaf of terms \(\tm\) over \(\ty\).
  \item Dependent context extension functor of types to contexts \(\ext - -\).
  \item Natural isomorphism
    \(\ext - - : \sigma{γ : \ctx(Δ,Γ)}{\tm Δ {A\subst γ}} ≅ \ctx(Δ,\ext Γ A)\)
    in \(Γ\) and \(Δ\) with inverse \(φ\).
  \end{itemize}

  We also define the projections and variable terms as \(\p{π_Γ^A, \var_Γ^A} ≔ φ(\id_{\ext Γ A})\).
  We will often omit the type and context annotations, as they can be deduced.
\end{definition}

\begin{theorem}
  Let \(γ : Δ → Γ\), \(δ : Θ → Δ\), \(A : \ty Γ\), and \(t : \tm Δ {A\subst γ}\).
  Then the following equalities hold.
  \begin{itemize}
  \item \(\ext γ A = \ext {\p{γ∘π}} {\var}\)
  \item \(\p{\ext γ t}∘δ = \ext {γ∘δ} {t\subst δ}\)
  \item \(π ∘ \p{\ext γ t} = γ\)
  \item \(\var\subst {\ext γ t} = t\)
  \end{itemize}
\end{theorem}
\begin{proof}
  The first equality expresses naturality of the isomorphism in \(Γ\), while the
  second expresses naturality in \(Δ\).

  For the other two equalities we can write
  \[ \ext γ t = \id ∘ \ext γ t = \ext π {\var} ∘ \ext γ t = \ext {\p{π ∘ \ext γ t}}
    {\var\subst {\ext γ t}}\text. \]
\end{proof}


\begin{definition}
  A category with families has dependent product types when...
  where \(-(t) ≔ -\subst{\ext \id t}\).
\end{definition}




%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End:
